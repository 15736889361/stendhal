<?xml version="1.0" encoding="UTF-8"?>

<!--

<zone>       defines zone properties

<objecttype> defines object properties
     name:    name of the object type
     tileset,
     tileid:  name of tileset/tileid for tile based objects
     color:   for shape based objects

Note: an objecttype may support both shape based and tile based objects.


<property>   defines a property of an object or zone
     name:    name of property
     type:    type of property (string, int, double, boolean, enum, enumset, color)
     default: default value; if this attribute is missing, the property is a mandatory field
     values:  comma-separated list of allowed values for type=enum and type=enumset


Note: In the <zone>.xml, there are conditional entities (e.g. for christmas, easter, minetown). 
      We can use distinct object layers for them, so there is no condition-property.
-->



<objecttypes>

	<zone>
		<property name="color_method" type="enum"  default="" values="softlight, time, multiply" />
		<property name="color"        type="color" default="" />
		<property name="blend_method" type="enum"  default="" values=", bleach" />
	</zone>

<!--

 condition="stendhal.minetown"

 <objecttype name="portal" tileset="objects" tileid="1">
   <property name="zone" type="string" />
   <property name="reference" type="string" />

      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.LockedDoor">
        <parameter name="class">skulldoor_s</parameter>
        <parameter name="key">golden key</parameter>
      </implementation>

      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination" />

      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.HousePortal">
        <parameter name="doorId">kirdneh house 26</parameter>
        <parameter name="rejected">The door is locked.</parameter>
      </implementation>

    <portal x="3" y="13" ref="lab_entrance">
      <destination zone="int_apothecary_lab" ref="lab_exit" />
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.QuestCompletedPortal">
        <parameter name="quest">traps_for_klaas</parameter>
        <parameter name="rejected">You feel a cool breeze coming in from somewhere.</parameter>
      </implementation>
      <attribute name="resistance">0</attribute>
      <attribute name="hidden" />
    </portal>

    <portal x="13" y="8" ref="orb_right">
      <destination zone="-1_fado_great_cave_e3" ref="jynath_orb" />
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.QuestCheckingPortal">
        <parameter name="quest">learn_scrying</parameter>
        <parameter name="rejected">You must learn to use orb first.</parameter>
      </implementation>
      <attribute name="use" />
    </portal>

    <portal x="27" y="15" ref="east_choice_floor_1">
      <destination zone="int_semos_wizards_tower_1" ref="choice_floor_1" />
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.ConditionAndActionPortal">
        <parameter name="condition">new QuestInStateCondition("zekiels_practical_test","first_step")</parameter>
        <parameter name="rejected">Zekiel the guardian: 'You have chosen the correct one of Malleus. Now use the candle at the shimmering spot of the hexagram.'</parameter>
        <parameter name="action">new MultipleActions([new SendPrivateMessageAction("Zekiel the guardian: 'You have chosen the correct one of Malleus. Now use the candle at the shimmering spot of the hexagram.'"), new EquipItemAction("candle"), new SetQuestAction("zekiels_practical_test", "second_step")])</parameter>
      </implementation>
    </portal>

    <portal x="23" y="20" ref="portal_to_third_floor">
      <destination zone="int_semos_wizards_tower_3" ref="portal_from_second_floor" />
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.KeyDestroyingDoor">
        <parameter name="class">transparent</parameter>
        <parameter name="key">candle</parameter>
        <parameter name="rejected">You must hold your candle over this spot, walk here with a candle and it will float.</parameter>
      </implementation>
      <attribute name="hidden" />
    </portal>

    <portal x="26" y="44" ref="to_balrog" replacing="true">
      <destination zone="-2_semos_mine_w2" ref="exit_balrog" />
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.LevelCheckingPortal">
        <parameter name="minimum-level">150</parameter>
        <parameter name="rejected">Aenihata's barrier is strong. The balrog would kill you instantly, run away!</parameter>
      </implementation>
    </portal>

    <portal x="94" y="57" ref="downstairs" replacing="true">
      <destination zone="-3_semos_catacombs" ref="upstairs" />
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.KeyedPortal">
        <parameter name="key">vampirette entrails</parameter>
        <parameter name="quantity">7</parameter>
        <parameter name="rejected">Prove that you killed all vampirettes before you face their lord.</parameter>
      </implementation>
    </portal>


    <entity x="71" y="33">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.RandomDestinationPortal" />
      <attribute name="width">2</attribute>
      <attribute name="height">2</attribute>
      <attribute name="use" />
    </entity>

 </objecttype>
-->


	<!-- Signs -->

	<!--
	<objecttype name="sign" tileset="objects" tileid="2">
		<property name="text" type="string" />
		<attribute name="class">transparent</attribute>
	</objecttype>

<entity x="15" y="10">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Reader" />
      <attribute name="text">Kokuda stew recipe:
1 kokuda
3 eggs
2 flasks of water</attribute>
    </entity>

    <entity x="94" y="118" condition="stendhal.minetown">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign" />
      <attribute name="text">Welcome to the Mine Town Revival Weeks!</attribute>
      <attribute name="width">2</attribute>
      <attribute name="height">2</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="resistance">0</attribute>
    </entity>


    <entity x="52" y="114">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description" />
      <attribute name="text">You see a mailbox. It says: Ortiv Milquetoast, former teacher.</attribute>
      <attribute name="class">transparent, signpost</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
    </entity>

    <entity x="11" y="81">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.ShopSign">
        <parameter name="shop">buyamazoncloaks</parameter>
        <parameter name="title">Cloaks bought here</parameter>
        <parameter name="seller">false</parameter>
        <parameter name="caption">Nicklesworth only buys good quality cloaks:</parameter>
      </implementation>
      <attribute name="class">blackboard</attribute>
    </entity>

    <entity x="9" y="0">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.PopupImage">
        <parameter name="image">map-orril-castle.png</parameter>
        <parameter name="title">Ancient Or'ril castle</parameter>
      </implementation>
      <attribute name="class">map-orril-castle</attribute>
    </entity>

	-->


	<!-- Resources -->

	<objecttype name="CoalSource"        tileset="logic/resource" tileid="1" />
	<!-- TODO: Use a logic/fish-tileset instead of a species-property -->
	<objecttype name="FishSource"        tileset="logic/resource" tileid="2">
		<property name="species"  type="enum" values="char, cod, mackerel, perch, roach, clown fish, red lionfish, surgeonfish, trout"/>
	</objecttype>
	<objecttype name="GoldSource"        tileset="logic/resource" tileid="3" />
	<objecttype name="WaterSpringSource" tileset="logic/resource" tileid="4" />
	<objecttype name="WellSource"        tileset="logic/resource" tileid="5" />


	<!-- Music and Sound -->

	<objecttype name="BackgroundMusicSource" tileset="logic/sound" tileid="1">
		<property name="sound"  type="string" />
		<property name="volume" type="int"    default="100" />
		<property name="radius" type="int"    default="10000" />
	</objecttype>

	<objecttype name="LoopedAmbientSoundSource" tileset="logic/sound" tileid="2">
		<property name="sound"  type="string" />
		<property name="volume" type="int"    default="100" />
		<property name="radius" type="int"    default="10000" />
	</objecttype>

	<objecttype name="PeriodicAmbientSoundSource" tileset="logic/sound" tileid="3">
		<property name="sound"  type="string" />
		<property name="min"    type="int"    default="60" />
		<property name="max"    type="int"    default="300" />
		<property name="volume" type="int"    default="100" />
		<property name="radius" type="int"    default="10000" />
	</objecttype>

	<objecttype name="PlaySoundEntity" tileset="logic/sound" tileid="4">
		<property name="sound"       type="string" />
		<property name="volume"      type="int"    default="100" />
		<property name="radius"      type="int"    default="10000" />
		<property name="description" type="string" default="You see something." />
	</objecttype>


	<!-- Chests -->

	<objecttype name="PersonalChest" tileset="logic/chest" tileid="1">
		<property name="slot"   type="string" />
	</objecttype>
	<objecttype name="NPCOwnedChest" tileset="logic/chest" tileid="2">
		<property name="npc"    type="string" />
	</objecttype>
	<objecttype name="StoredChest"   tileset="logic/chest" tileid="3" />


	<!-- Other -->
	<objecttype name="Clock"           tileset="logic/clock" tileid="1" />

	<objecttype name="PointOfInterest" tileset="logic/poi" tileid="1">
		<property name="name"        type="string" />
		<property name="title"       type="string"/>
		<property name="type"        type="enum"  values="bank, dungeon" />
		<property name="description" type="string" />
		<property name="url"         type="string" />
	</objecttype>

	<objecttype name="Gate"            tileset="logic/gate" tileid="1">
		<property name="image"       type="string" default="fence_gate" />
		<property name="orientation" type="string" default="v" />
		<property name="condition"   type="string" default="" />
		<property name="message"     type="string" default="The gate is locked."/>
		<property name="autoclose"   type="int"    default="300" />
	</objecttype>

	<objecttype name="Block"           tileset="logic/block" tileid="1">
		<property name="multi"       type="boolean" default="false" />
		<property name="class"       type="string" />
		<property name="shape"       type="string" default="" />
	</objecttype>
	<objecttype name="BlockTarget"     tileset="logic/block" tileid="2">
		<property name="action"      type="string" default="" />
		<property name="shape"       type="string" default="" />
	</objecttype>
	<objecttype name="ViewChangeOrb"   tileset="logic/orb"   tileid="1">
		<property name="x"           type="int"/>
		<property name="y"           type="int"/>
	</objecttype>


	<!--  Areas -->
	<objecttype name="Area"  color="#FFFF00">
		<property name="behaviour" type="enumset" values="NoTeleportIn, NoTeleportOut, NoMoveTo, NoItemMove, NoLogin, OnlyOnePlayer, FertileGround" />
		<property name="message"   type="string"  default="" />
		<property name="new-x"     type="int"     default="" />
		<property name="new-y"     type="int"     default="" />
	</objecttype>

	<objecttype name="MessagingArea"   color="#FFFFAA">
		<property name="message"   type="string"  default="Welcome" />
		<property name="warning"   type="boolean" default="false" />
	</objecttype>


	<objecttype name="WalkBlockerArea" color="#AAAAFF">
		<property name="description"    type="string"  default="You see a nice clean table for resting your drinks on." />
	</objecttype>

	<objecttype name="DamagingArea"    color="#AA0000">
		<property name="name"           type="string" />
		<property name="interval"       type="int"     default="2" />
		<property name="damage"         type="int"     default="50" />
		<property name="probability"    type="int"     default="30" />
		<property name="players-only"   type="boolean" default="true" />
	</objecttype>

	<objecttype name="LifeDrainArea"   color="#CC0000">
		<property name="name"           type="string" />
		<property name="interval"       type="int"     default="2" />
		<property name="maximum-damage" type="int"     default="50" />
		<property name="probability"    type="int"     default="100" />
		<property name="players-only"   type="boolean" default="true" />
	</objecttype>

</objecttypes>
